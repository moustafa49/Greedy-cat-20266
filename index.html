<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ˜º Greedy Cat MAX â€“ Ultimate AI</title>

<style>
body{
  background:#0f0f0f;color:#fff;
  font-family:'Cairo',Tahoma,Arial;
  direction:rtl;text-align:center;margin:0
}
h1{margin:12px 0}
.card{
  background:#1a1a1a;
  margin:10px auto;
  padding:14px;
  border-radius:16px;
  max-width:480px;
  box-shadow:0 0 14px #000
}
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px
}
.btn{
  font-size:2em;
  padding:12px 0;
  border-radius:14px;
  cursor:pointer;
  background:#161616;
  border:2px solid #333;
  position:relative;
}
.btn.hot{
  border-color:#ff9800;
  box-shadow:0 0 10px #ff980088;
}
.hotTag{
  position:absolute;
  top:2px;right:4px;
  font-size:.6em;
  color:#ff9800;
}
.bar{font-size:1.4em;line-height:1.9}
.percent{line-height:1.7}
.reco{font-size:1.6em;line-height:2}
.table{
  font-size:.95em;
  text-align:right;
  line-height:1.7
}
.small{font-size:.85em;color:#aaa}
</style>
</head>

<body>

<h1>ğŸ˜º Greedy Cat MAX</h1>

<!-- Ø£Ø²Ø±Ø§Ø± -->
<div class="card">
  <div class="grid" id="buttons"></div>
  <div class="small">
    Ø¶ØºØ·Ø© = ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±<br>
    Ø¯Ø¨Ù„ ÙƒÙ„ÙŠÙƒ = HOT ğŸ”¥ (Ù…Ø¤Ø´Ø± Ø°ÙƒÙŠ)
  </div>
</div>

<!-- Ø´Ø±ÙŠØ· -->
<div class="card">
  ğŸ“‹ Ø¢Ø®Ø± 20 Ø¯ÙˆØ±:
  <div class="bar" id="last20">(ÙØ§Ø±Øº)</div>
</div>

<!-- ØªÙˆØµÙŠØ© -->
<div class="card">
  ğŸ”® Ø§Ù„ØªÙˆØµÙŠØ© Ø§Ù„Ø°ÙƒÙŠØ© (5):
  <div class="reco" id="recommendation">(Ø³Ø¬Ù‘Ù„ Ù„Ø¹Ø¨)</div>
  <div class="small">Ù…Ø¨Ù†ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„ØªØ§Ø±ÙŠØ® + Ø§Ù„ØªØ±Ù†Ø¯ + Ø§Ù„ØºÙŠØ§Ø¨ + HOT</div>
</div>

<!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
<div class="card">
  ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ØªÙØµÙŠÙ„ÙŠØ©:
  <div class="table" id="stats"></div>
</div>

<div class="card">
  <button onclick="resetAll()">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ ğŸ—‘ï¸</button>
</div>

<script>
const items = ["ğŸ”","ğŸŸ","ğŸ¦","ğŸ—","ğŸ¥•","ğŸŒ½","ğŸ…","ğŸŒ¶ï¸"];

let data = JSON.parse(localStorage.getItem("gc_full_ai")) || {
  history: [],
  hot: {}
};

function save(){
  localStorage.setItem("gc_full_ai", JSON.stringify(data));
}

// ØªØ³Ø¬ÙŠÙ„
function addItem(item){
  data.history.push(item);
  save(); render();
}

// HOT
function toggleHot(item){
  data.hot[item] = !data.hot[item];
  save(); render();
}

// Ø£Ø²Ø±Ø§Ø±
function renderButtons(){
  let html="";
  items.forEach(i=>{
    const hot = data.hot[i];
    html += `
    <div class="btn ${hot?'hot':''}"
      onclick="addItem('${i}')"
      ondblclick="toggleHot('${i}')">
      ${i}${hot?'<div class="hotTag">ğŸ”¥</div>':''}
    </div>`;
  });
  document.getElementById("buttons").innerHTML = html;
}

// Ø¢Ø®Ø± 20
function renderLast20(){
  const last20 = data.history.slice(-20);
  document.getElementById("last20").innerText =
    last20.length ? last20.join(" ") : "(ÙØ§Ø±Øº)";
}

// ØªÙˆØµÙŠØ© Ø°ÙƒÙŠØ©
function renderRecommendation(){
  const total = data.history.length;
  if(total < 5){
    document.getElementById("recommendation").innerText = "Ø³Ø¬Ù‘Ù„ Ø£Ø¯ÙˆØ§Ø± Ø£ÙƒØªØ±";
    return;
  }

  const last20 = data.history.slice(-20);
  let scores = {};

  items.forEach(item=>{
    const totalC = data.history.filter(x=>x===item).length;
    const lastC = last20.filter(x=>x===item).length;
    const lastIdx = data.history.lastIndexOf(item);
    const gap = lastIdx === -1 ? total : total - lastIdx;

    let score =
      (totalC/total)*40 +
      (lastC/20)*40 +
      Math.min(gap,20);

    if(data.hot[item]) score += 8;

    scores[item] = score;
  });

  const top5 = Object.entries(scores)
    .sort((a,b)=>b[1]-a[1])
    .slice(0,5)
    .map(x=>x[0])
    .join(" ");

  document.getElementById("recommendation").innerText = top5;
}

// Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
function renderStats(){
  const total = data.history.length;
  let html = "";
  items.forEach(item=>{
    const count = data.history.filter(x=>x===item).length;
    const lastIdx = data.history.lastIndexOf(item);
    const lastSeen = lastIdx === -1 ? "â€”" : (total - lastIdx) + " Ø¯ÙˆØ±";
    const gap = lastIdx === -1 ? total : total - lastIdx - 1;

    html += `
    ${item} |
    Ø§Ù„Ø¹Ø¯Ø¯: ${count} |
    Ø¢Ø®Ø± Ù…Ø±Ø©: ${lastSeen} |
    ØºØ§ÙŠØ¨: ${gap} Ø¯ÙˆØ±
    <br>`;
  });
  document.getElementById("stats").innerHTML = html;
}

function resetAll(){
  if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ")){
    data={history:[],hot:{}};
    save(); render();
  }
}

function render(){
  renderButtons();
  renderLast20();
  renderRecommendation();
  renderStats();
}

render();
</script>

</body>
</html>
