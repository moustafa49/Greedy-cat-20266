<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ğŸ˜º Greedy Cat MAX</title>

<style>
body{
  background:#0f0f0f;
  color:#fff;
  font-family:'Cairo',Tahoma,Arial;
  direction:rtl;
  text-align:center;
  margin:0;
}
h1{margin:12px 0}
.card{
  background:#1a1a1a;
  margin:10px auto;
  padding:14px;
  border-radius:16px;
  max-width:420px;
  box-shadow:0 0 14px #000;
}
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
}
.btn{
  font-size:2em;
  padding:12px 0;
  border-radius:14px;
  cursor:pointer;
  background:#161616;
  border:2px solid #333;
  transition:.15s;
}
.btn:active{transform:scale(.95)}
.small{font-size:.9em;color:#aaa}
.percent{
  font-size:1em;
  line-height:1.8;
  margin-top:8px;
}
.bar{
  font-size:1.5em;
  line-height:1.9;
  word-wrap:break-word;
}
</style>
</head>

<body>

<h1>ğŸ˜º Greedy Cat MAX</h1>

<!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù„Ø¹Ø¨ -->
<div class="card">
  <div class="grid" id="buttons"></div>
  <div class="small">Ø§Ø¶ØºØ· = ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯ÙˆØ±</div>
</div>

<!-- Ø´Ø±ÙŠØ· Ø¢Ø®Ø± 20 Ø¯ÙˆØ± -->
<div class="card">
  ğŸ“‹ Ø¢Ø®Ø± 20 Ø¯ÙˆØ±:
  <div class="bar" id="last20">(ÙØ§Ø±Øº)</div>
</div>

<!-- Ø§Ù„Ù†Ø³Ø¨ Ø§Ù„Ù…Ø¦ÙˆÙŠØ© -->
<div class="card">
  ğŸ“Š Ø§Ù„Ù†ÙØ³ÙØ¨ Ø§Ù„Ù…Ø¦ÙˆÙŠØ© (Ù…Ù† ÙƒÙ„ Ø§Ù„Ø£Ø¯ÙˆØ§Ø±):
  <div class="percent" id="percentages"></div>
</div>

<!-- ØªØ­ÙƒÙ… -->
<div class="card">
  <button onclick="resetAll()">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„ ğŸ—‘ï¸</button>
</div>

<script>
// Ø§Ù„Ø£ØµÙ†Ø§Ù
const items = ["ğŸ”","ğŸŸ","ğŸ¦","ğŸ—","ğŸ¥•","ğŸŒ½","ğŸ…","ğŸŒ¶ï¸"];

// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
let data = JSON.parse(localStorage.getItem("gc_max_data")) || {
  history: [] // Ø¨Ù„Ø§ Ù†Ù‡Ø§ÙŠØ©
};

// Ø­ÙØ¸
function save(){
  localStorage.setItem("gc_max_data", JSON.stringify(data));
}

// ØªØ³Ø¬ÙŠÙ„ Ø¯ÙˆØ±
function addItem(item){
  data.history.push(item);
  save();
  render();
}

// Ø±Ø³Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø±
function renderButtons(){
  let html="";
  items.forEach(i=>{
    html += `<div class="btn" onclick="addItem('${i}')">${i}</div>`;
  });
  document.getElementById("buttons").innerHTML = html;
}

// ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø¢Ø®Ø± 20
function renderLast20(){
  const last20 = data.history.slice(-20);
  document.getElementById("last20").innerText =
    last20.length ? last20.join(" ") : "(ÙØ§Ø±Øº)";
}

// Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨
function renderPercentages(){
  const total = data.history.length;
  let text = total ? "" : "Ù„Ø³Ù‡ Ù…ÙÙŠØ´ Ø¨ÙŠØ§Ù†Ø§Øª";

  items.forEach(item=>{
    const count = data.history.filter(x=>x===item).length;
    if(count>0){
      const percent = ((count/total)*100).toFixed(1);
      text += `${item} : ${percent}%<br>`;
    }
  });

  document.getElementById("percentages").innerHTML = text;
}

// Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„
function resetAll(){
  if(confirm("Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø³Ø¬Ù„ØŸ")){
    data.history = [];
    save();
    render();
  }
}

// Ø±Ø³Ù… Ø§Ù„ÙƒÙ„
function render(){
  renderButtons();
  renderLast20();
  renderPercentages();
}

render();
</script>

</body>
</html>
